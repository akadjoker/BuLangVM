// BuLang Syntax Master Test
// Tests all major language constructs

print("=== BuLang Syntax Master Test ===\n");

// Simple assert helper for tests
def assert(cond, msg) {
    if (!cond) {
        print("ASSERT FAIL:", msg);
    }
}

// ============================================================================
// 1. VARIABLES
// ============================================================================
print("1. Variables:");
var a = 10;
var b = 20;
var nome = "BuLang";
print("  a =", a, ", b =", b, ", nome =", nome);

// ============================================================================
// 2. IF / ELSE
// ============================================================================
print("\n2. If/Else:");
if (x > 10)
{
    print("  x é maior que 10");
} else
{
    print("  x é menor ou igual a 10");
}

if (x < 5)
{
    print("  x < 5");
} elif (x < 15)
{
    print("  x < 15");
} elif (x == 15)
{
    print("  x == 15 ✓");
} else
{
    print("  x > 15");
}

// ============================================================================
// 3. SWITCH (sem case)
// ============================================================================
var valor = 2;
print("\n3. Switch:");
switch (valor)
{
    case 1: { print("  valor = 1"); }
    case 2: { print("  valor = 2 ✓"); }
    case 3: { print("  valor = 3"); }
    default: { print("  outro valor"); }
}
// ============================================================================
// 4. WHILE
// ============================================================================
print("\n4. While:");
var i = 0;
while (i < 3)
{
    print("  i =", i);
    i = i + 1;
}

// ============================================================================
// 5. DO WHILE
// ============================================================================
print("\n5. Do-While:");
var j = 0;
do
{
    print("  j =", j);
    j = j + 1;
} while (j < 3);

// ============================================================================
// 6. FOR
// ============================================================================
print("\n6. For:");
for (var k = 0; k < 3; k = k + 1)
{
    print("  k =", k);
}

// ============================================================================
// 7. FOREACH
// ============================================================================
print("\n7. Foreach:");
var arr = [10, 20, 30];
foreach (item in arr) 
{
    print("  item =", item);
}

// ============================================================================
// 8. TRY/CATCH
// ============================================================================
print("\n8. Try/Catch:");
try
{
    print("  Tentando...");
    var erro = 1 / 0; // Pode causar erro
    print("  Sucesso");
} catch (e)
{
    print("  Erro capturado:", e);
}

// ============================================================================
// 9. FUNCTIONS
// ============================================================================
print("\n9. Functions:");
def soma(a, b)
{
    return a + b;
}
var resultado = soma(5, 3);
print("  soma(5, 3) =", resultado);

// ============================================================================
// 10. STRUCTS
// ============================================================================
print("\n10. Structs:");
struct Ponto
{
    var x;
    var y;
}
var p = Ponto(10, 20);
print("  Ponto:", p.x, ",", p.y);

// ============================================================================
// 11. CLASSES
// ============================================================================
print("\n11. Classes:");
class Contador 
{
    var valor;
    
    def init(v)
    {
        self.valor = v;
    }
    
    def incrementar()
    {
        self.valor = self.valor + 1;
        return self.valor;
    }
}
var c = Contador(0);  
print("  contador inicial:", c.valor);
c.incrementar();
c.incrementar();
print("  após 2 incrementos:", c.valor);

// ============================================================================
// 12. ARRAYS
// ============================================================================
print("\n12. Arrays:");
var numeros = [1, 2, 3, 4, 5];
print("  array:", numeros);
print("  numeros[0] =", numeros[0]);
print("  numeros[4] =", numeros[4]);

// ============================================================================
// 13. MAPS
// ============================================================================
print("\n13. Maps:");
var mapa = {"nome": "João", "idade": 25};
print("  mapa['nome'] =", mapa["nome"]);
print("  mapa['idade'] =", mapa["idade"]);



// ============================================================================
// 14. BREAK/CONTINUE
// ============================================================================
print("\n14. Break/Continue:");
for (var n = 0; n < 5; n = n + 1)
{
    if (n == 1)
    {
        print("  n = 1 (continue)");
        continue;
    }
    if (n == 3)
    {
        print("  n = 3 (break)");
        break;
    }
    print("  n =", n);
}

// ============================================================================
// 15. LOGICAL OPERATORS
// ============================================================================
print("\n15. Logical Operators:");
var verdadeiro = true;
var falso = false;
print("  true and true =", verdadeiro && verdadeiro);
print("  true and false =", verdadeiro && falso);
print("  true or false =", verdadeiro || falso);
print("  not true =", !verdadeiro);

// ============================================================================
// 16. COMPARISON OPERATORS
// ============================================================================
print("\n16. Comparison:");
print("  10 > 5 =", 10 > 5);
print("  10 < 5 =", 10 < 5);
print("  10 >= 10 =", 10 >= 10);
print("  10 <= 10 =", 10 <= 10);
print("  10 == 10 =", 10 == 10);
print("  10 != 5 =", 10 != 5);

// ============================================================================
// 17. ARITHMETIC OPERATORS
// ============================================================================
print("\n17. Arithmetic:");
print("  10 + 5 =", 10 + 5);
print("  10 - 5 =", 10 - 5);
print("  10 * 5 =", 10 * 5);
print("  10 / 5 =", 10 / 5);
print("  10 % 3 =", 10 % 3);



// ============================================================================
// 18. INCREMENT/COMPOUND OPERATORS
// ============================================================================

print("\n18. Increment/Compound:");
var i = 0;
print("  i =", i);
print("  i++ =", i++);
print("  after i++ =", i);
print("  ++i =", ++i);
print("  after ++i =", i);
i--;
print("  after i-- =", i);
--i;
print("  after --i =", i);
i += 1;
print("  i += 1 ->", i);
i *= 10;
print("  i *= 10 ->", i);
i -= 3;
print("  i -= 3 ->", i);
i /= 7;
print("  i /= 7 ->", i);
assert(i == 1, "increment/compound final value should be 1");



// ============================================================================
// 19. BITWISE OPERATORS
// ============================================================================

print("\n19. Bitwise:");
print("  5 & 3 =", 5 & 3);
print("  5 | 3 =", 5 | 3);
print("  5 ^ 3 =", 5 ^ 3);
print("  ~5 =", ~5);
print("  5 << 1 =", 5 << 1);
print("  5 >> 1 =", 5 >> 1);
assert((5 & 3) == 1, "bitwise AND");
assert((5 | 3) == 7, "bitwise OR");
assert((5 ^ 3) == 6, "bitwise XOR");
assert((5 << 1) == 10, "bitwise SHL");
assert((5 >> 1) == 2, "bitwise SHR");


// ============================================================================
// 20 test buffers
// ============================================================================

print("\n20. Buffers:");

var buf = @(10, 0); // 10 bytes (UINT8)
buf[0] = 42;
print("buf[0] =", buf[0]);
print("len =", buf.length());






print("\n=== All Tests Complete ✓ ===");
