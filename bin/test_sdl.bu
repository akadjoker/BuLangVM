 
require "sdl";

// Import and use the SDL module
import SDL;
using SDL;
 

 
var result = SDL_Init(SDL_INIT_VIDEO);
if (result < 0)
{
    print ("SDL_Init failed: " ,SDL_GetError());
}
else
{
    

    // Create a window
    var window = SDL_CreateWindow("BuLang Plugin Test", 100, 100, 640, 480, SDL_WINDOW_SHOWN | SDL_WINDOW_RESIZABLE);
    if (window == nil)
    {
        print("Window creation failed: " , SDL_GetError());
    }
    else
    {
        // Create renderer
        var renderer = SDL_CreateRenderer(window, -1, SDL_RENDERER_ACCELERATED);
        if (renderer == nil)
        {
            print("Renderer creation failed: " , SDL_GetError());
        }
        else
        {
            
            var e = SDL_Event();
var running = true;
var rectX = 400;
var rectY = 300;
var rectSize = 50; 

while (running) 
{
  

    while (SDL_PollEvent(e)) 
    {
      
        if (e.type == SDL_QUIT) 
        {
            running = false;
            break;
        }        

        if (e.type == SDL_MOUSEMOTION) 
        {
              
            // e.motionX e e.motionY têm a posição
           //  print("Mouse em: " + e.motionX + " , " + e.motionY);
            
        }

        if (e.type == SDL_MOUSEBUTTONDOWN) 
        {
            
            if (e.button == 1) 
            {
                print("Clique Esquerdo em: " , e.btnX , ", " , e.btnY);
                rectX = e.btnX;
                rectY = e.btnY;
            }
            
            if (e.button == 3) 
            {
                print("Clique Direito!");
      

            }
             
        }

 
        if (e.type == SDL_MOUSEWHEEL) 
        {
            // Se e.wheelY for 1 (subiu) ou -1 (desceu)
            // Vamos aumentar ou diminuir o tamanho do quadrado
            rectSize = rectSize + (e.wheelY * 10);
             
            
        }
        if (e.type == SDL_WINDOWEVENT) 
        {
           
            
            if (e.winEvent == SDL_WINDOWEVENT_RESIZED) 
            {
           
                print("Nova Largura: " + e.Width);
                print("Nova Altura:  " + e.Height);
                
                
            }
        }

        if (e.type == SDL_KEYDOWN) 
        {
             print("Tecla: " + e.key);
             if (e.key == 27) { running = false; } // ESC
        }
         
    }

            // Draw something
            SDL_SetRenderDrawColor(renderer, 100, 149, 237, 255); // Cornflower blue
            SDL_RenderClear(renderer);

            // Draw a red rectangle
            SDL_SetRenderDrawColor(renderer, 255, 0, 0, 255);
            SDL_RenderFillRect(renderer, 100, 100, 200, 150);

            // Present
            SDL_RenderPresent(renderer);

}
         

            SDL_DestroyRenderer(renderer);
        }

        SDL_DestroyWindow(window);
    }

    SDL_Quit();
}

 
