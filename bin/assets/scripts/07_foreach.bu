print("--- TEST 07: Foreach Loop ---");

// ==========================================
// CASO 1: Iteração Simples em Array
// ==========================================
var numbers = [10, 20, 30, 40];
var sum = 0;
var iterations = 0;

foreach (num in numbers) {
    sum = sum + num;
    iterations = iterations + 1;
}

assert_eq(sum, 100, "Foreach sum all elements");
assert_eq(iterations, 4, "Foreach correct iteration count");

// ==========================================
// CASO 2: Iteração com Strings
// ==========================================
var words = ["Ola", " ", "Mundo"];
var sentence = "";

foreach (w in words) {
    sentence = sentence + w;
}

assert_eq(sentence, "Ola Mundo", "Foreach with strings");

// ==========================================
// CASO 3: Break dentro do Foreach
// ==========================================
var values = [1, 2, 3, 4, 5, 6];
var stoppedAt = 0;

foreach (v in values) {
    stoppedAt = v;
    if (v == 3) {
        break; // Testa se o break sai limpo do foreach
    }
}

assert_eq(stoppedAt, 3, "Break inside foreach");

// ==========================================
// CASO 4: Foreach em Array Vazio
// ==========================================
var empty = [];
var run = false;

foreach (item in empty) {
    run = true;
}

assert(!run, "Foreach should not run on empty array");

// ==========================================
// CASO 5: Scope da Variável (Se suportado)
// ==========================================
// A variavel 'item' não deve estragar variaveis externas com mesmo nome
var item = 999;
foreach (item in numbers) {
    // faz nada, só itera
}
assert_eq(item, 999, "Foreach variable scope isolation");

pass("07_foreach.bu completed");